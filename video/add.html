<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Adicionar Video</title>
</head>
<body>

<h2>Adicionar Video</h2>

<form id="videoForm">
    <label for="code">Code:</label><br>
    <input type="text" id="code" name="code" value=""><br><br>

    <label for="title">Title:</label><br>
    <input type="text" id="title" name="title" value=""><br><br>

    <input type="button" value="Guardar" class="btn btn-primary" onclick="add();">
</form>

<a href="../index.html" class="link-secondary">Volver al inicio</a>

<script>
    function add() {
        var code = document.getElementById("code").value;
        var title = document.getElementById("title").value;

        // Validar que ambos campos no estén vacíos
        if (code === "" || title === "") {
            alert("Por favor, complete ambos campos.");
            return;
        }

        var newVideo = {
            "code": code,
            "title": title
        };

        var xmlhttp = new XMLHttpRequest();
        xmlhttp.open("POST", "http://localhost:8080/videos", true);
        xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");

        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState === XMLHttpRequest.DONE) {
                if (xmlhttp.status === 200) {
                    alert("Video añadido exitosamente");
                    window.location.href = "list.html"; // Redirigir a la página de lista
                } else {
                    alert("Hubo un error al añadir el video");
                    console.error("Error:", xmlhttp.status, xmlhttp.statusText);
                }
            }
        };

        console.log("Adding video: " + JSON.stringify(newVideo));
        xmlhttp.send(JSON.stringify(newVideo));
    }
</script>

</body>
</html>
